<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Editor Paramétrico Animalista</title>

<style>
/* ============================
   FUENTE
============================ */
@font-face {
    font-family:'Gotham';
    src:local('Gotham'), local('Gotham Book');
}

*{margin:0;padding:0;box-sizing:border-box;}

html, body{
    width:100%;
    height:100%;
    background:white;
    font-family:'Gotham', sans-serif;
    font-weight:300;
    overflow-x:hidden;
}

/* ============================
   BOTÓN HAMBURGUESA
============================ */
.menu-btn{
    position:fixed;
    top:30px;
    right:40px;
    width:65px;
    height:65px;
    background:#4ED9D3;
    border-radius:18px;
    border:none;
    color:white;
    font-size:40px;
    display:flex;
    justify-content:center;
    align-items:center;
    cursor:pointer;
    z-index:20;
    box-shadow:0 0 14px rgba(78,217,211,0.6);
}

/* ============================
   MENÚ LATERAL
============================ */
.side-menu{
    position:fixed;
    top:0;
    right:-320px;
    width:320px;
    height:100vh;
    background:white;
    padding:40px 30px;
    display:flex;
    flex-direction:column;
    gap:22px;
    font-size:20px;
    transition:0.35s;
    z-index:19;
    box-shadow:-4px 0 14px rgba(0,0,0,0.2);
}
.side-menu.activo{ right:0; }

.side-menu a{
    text-decoration:none;
    color:#222;
    padding-bottom:10px;
    border-bottom:1px solid #e7e7e7;
}

.menu-group{
    background:none;
    border:none;
    outline:none;
    padding:0 0 10px 0;
    text-align:left;
    cursor:pointer;
    font-size:20px;
    color:#222;
    border-bottom:1px solid #e7e7e7;
    font-weight:300 
}

#pantalla-acceso h2{
    font-weight:300 !important;
}

.btn-bottom{
    background:none;
    border:none;
    font-size:20px;
    color:#222;
    padding:10px 0;
    cursor:pointer;
    font-weight:300 !important;
}

.submenu{
    margin-left:15px;
    margin-top:8px;
    font-size:18px;
    display:flex;
    flex-direction:column;
    gap:16px;
}
.oculto{ display:none; }

/* ============================
   PANTALLA DE ACCESO
============================ */
#pantalla-acceso{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:white;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    z-index:10;
}

.card{
    border:2px solid #4ED9D3;
    border-radius:18px;
    padding:40px;
    width:380px;
    text-align:center;
}

input{
    width:100%;
    padding:15px;
    margin-top:20px;
    border:none;
    border-radius:30px;
    background:#e6e6e6;
    text-align:center;
}

.boton-acceso{
    width:100%;
    margin-top:25px;
    padding:14px 0;
    border:none;
    border-radius:30px;
    background:#4ED9D3;
    color:white;
    cursor:pointer;
    box-shadow:0 0 12px rgba(78,217,211,0.55);
}

/* ============================
   EDITOR
============================ */
#editor{
    display:none;
    padding-top:120px;
    width:95%;
    max-width:1400px;
    margin:auto;
}

.grid{
    display:grid;
    grid-template-columns:repeat(5,1fr);
    gap:25px;
}

.tarjeta{
    border:2px solid #4ED9D3;
    border-radius:18px;
    padding:18px;
    background:white;
    box-shadow:0 0 12px rgba(78,217,211,0.2);
}

.titulo-tarjeta{
    text-align:center;
    font-size:14px;
    font-weight:500;
    margin-bottom:10px;
}

.label{
    font-size:11px;
    margin-top:10px;
    margin-bottom:4px;
}

input.campo{
    padding:10px;
    border-radius:10px;
    border:1px solid #ccc;
    background:white;
    font-size:11px;
}

.valor-box{
    display:flex;
    align-items:center;
    gap:5px;
}

.flecha{
    width:24px;
    height:24px;
    background:#4ED9D3;
    border:none;
    border-radius:6px;
    color:white;
    cursor:pointer;
    font-size:15px;
}

.btn-guardar{
    display:block;
    margin:40px auto;
    width:300px;
    padding:14px 0;
    background:#4ED9D3;
    border-radius:30px;
    border:none;
    color:white;
    cursor:pointer;
    box-shadow:0 0 12px rgba(78,217,211,0.55);
}
   /* ======================================================
   RESPONSIVE — TABLETS Y CELULARES
====================================================== */

/* TABLETS */
@media (max-width: 1024px){

    .menu-btn{
        width:55px;
        height:55px;
        font-size:34px;
        right:25px;
        top:25px;
    }

    .side-menu{
        width:280px;
        padding:30px 22px;
        font-size:18px;
    }

    #editor{
        padding-top:110px;
    }

    .grid{
        grid-template-columns:repeat(3,1fr);
        gap:20px;
    }

    .tarjeta{
        padding:16px;
    }

    .titulo-tarjeta{
        font-size:13px;
    }

    input.campo{
        font-size:11px;
    }
}

/* CELULARES */
@media (max-width: 600px){

    html, body{
        overflow-x:hidden;
    }

    .menu-btn{
        width:50px;
        height:50px;
        font-size:30px;
        right:15px;
        top:18px;
    }

    .side-menu{
        width:250px;
        padding:26px 20px;
        font-size:17px;
    }

    .submenu{
        font-size:15px;
    }

    #pantalla-acceso .card{
        width:90%;
        padding:26px;
    }

    #editor{
        width:98%;
        padding-top:110px;
    }

    .grid{
        grid-template-columns:repeat(1,1fr);
        gap:18px;
    }

    .tarjeta{
        padding:16px;
    }

    .titulo-tarjeta{
        font-size:14px;
        text-align:center;
    }

    .btn-guardar{
        width:85%;
        font-size:13px;
        padding:12px;
    }
}

</style>
</head>

<body>

<!-- ============================
     HAMBURGUESA
============================ -->
<button class="menu-btn" id="menuBtn">≡</button>

<!-- ============================
     MENÚ
============================ -->
<div class="side-menu" id="sideMenu">
    <a href="index.html">Inicio</a>
    <a href="metodologia.html">Metodología</a>

    <div class="menu-group" onclick="toggleSubmenu()">Colectivos ▾</div>
    <div id="submenu" class="submenu oculto">
        <a href="colectivo_animalista.html">Colectivo Animalista</a>
        <a href="rasgos_animalistas.html">Diccionario</a>
        <a href="https://docs.google.com/forms/d/e/1FAIpQLScUmgCjS6PLPH3ADlWlKlo0d7MOkndYrwhTFyjJTP1r2gGVzA/viewform?usp=header" target="_blank">Encuesta</a>
    </div>
</div>

<!-- ============================
     PANTALLA ACCESO
============================ -->
<div id="pantalla-acceso">
    <div class="card">
        <h2>ACCESO RESTRINGIDO</h2>
        <p style="font-size:13px;margin-top:8px;">Ingresa la contraseña para editar los rasgos</p>

        <input id="pass" type="password" placeholder="Contraseña">
        <button class="boton-acceso" onclick="validar()">ENTRAR</button>
    </div>

    <footer style="margin-top:40px;font-size:12px;color:#777;">
        © DICCIONARIO PARAMÉTRICO 2025. Todos los derechos reservados.
    </footer>
</div>

<!-- ============================
     EDITOR
============================ -->
<div id="editor">
    <div class="grid" id="grid"></div>
    <button class="btn-guardar" onclick="guardar()">GUARDAR CAMBIOS</button>
</div>

<script>
/* ------------------------------
   MENÚ LATERAL
------------------------------ */
document.getElementById("menuBtn").onclick = ()=>{
    document.getElementById("sideMenu").classList.toggle("activo");
};
function toggleSubmenu(){
    document.getElementById("submenu").classList.toggle("oculto");
}

/* ------------------------------
   CONTRASEÑA
------------------------------ */
function validar(){
    let p = document.getElementById("pass").value;
    if(p === "12345678"){
        document.getElementById("pantalla-acceso").style.display="none";
        document.getElementById("editor").style.display="block";
    } else {
        alert("Contraseña incorrecta");
    }
}

/* ------------------------------
   DATOS BASE
------------------------------ */
let datos = JSON.parse(localStorage.getItem("diccionarioAnimalista")) || [
    {rasgo:"Conexión", significado:"Vínculo afectivo profundo con los animales.", variable:"textura_suavidad", rango:"0.0-1.0", valor:0.78, funcion:"Mayor suavidad percibida → mayor conexión."},
    {rasgo:"Empatía", significado:"Capacidad de sentir el dolor animal como propio.", variable:"color_calidez", rango:"0.0-1.0", valor:0.92, funcion:"Colores cálidos aumentan empatía y cercanía."},
    {rasgo:"Protección", significado:"Impulso moral de defender y cuidar a los animales.", variable:"cierre_formal", rango:"0.0-1.0", valor:0.85, funcion:"Mayor cierre formal → mayor sensación de refugio."},
    {rasgo:"Impacto", significado:"Reacción emocional intensa ante el maltrato animal.", variable:"intensidad_gradiente", rango:"0.0-1.0", valor:0.90, funcion:"Gradientes intensos generan tensión emocional."},
    {rasgo:"Naturaleza", significado:"Asociación con espacios abiertos y bienestar animal.", variable:"apertura_espacial", rango:"0.0-1.0", valor:0.95, funcion:"Mayor apertura → más flujo, aire y luz."},
    {rasgo:"Respeto", significado:"Reconocimiento del animal como ser sintiente.", variable:"regularidad_formal", rango:"0.0-1.0", valor:0.82, funcion:"Mayor orden y regularidad comunican respeto."},
    {rasgo:"Justicia", significado:"Denuncia del maltrato y necesidad ética de actuar.", variable:"contraste_formal", rango:"0.0-1.0", valor:0.87, funcion:"Mayor contraste → mayor fuerza de denuncia."},
    {rasgo:"Sensibilidad", significado:"Reacción emocional ante estímulos y atmósferas.", variable:"luminosidad_interior", rango:"0.0-1.0", valor:0.89, funcion:"Mayor luz suave → mayor sensibilidad perceptual."},
    {rasgo:"Cuidado", significado:"Acciones afectivas cotidianas hacia los animales.", variable:"porosidad_formal", rango:"0.0-1.0", valor:0.84, funcion:"Mayor porosidad → más accesibilidad y cuidado."},
    {rasgo:"Indignación", significado:"Reacción moral ante el daño animal.", variable:"peso_formal", rango:"0.0-1.0", valor:0.91, funcion:"Mayor peso formal → mayor potencia ética."}
];

/* ------------------------------
   GENERAR TARJETAS
------------------------------ */
const grid = document.getElementById("grid");
datos.forEach((d,i)=>{
    grid.innerHTML += `
        <div class="tarjeta">

            <div class="titulo-tarjeta">${d.rasgo.toUpperCase()}</div>

            <div class="label">SIGNIFICADO:</div>
            <input class="campo" id="s${i}" value="${d.significado}">

            <div class="label">VARIABLE PARAMÉTRICA:</div>
            <input class="campo" id="v${i}" value="${d.variable}">

            <div class="label">RANGO:</div>
            <input class="campo" id="r${i}" value="${d.rango}">

            <div class="label">VALOR:</div>
            <div class="valor-box">
                <button class="flecha" onclick="cambiar(${i},1)">▲</button>
                <input class="campo" id="va${i}" value="${d.valor}">
                <button class="flecha" onclick="cambiar(${i},-1)">▼</button>
            </div>

            <div class="label">FUNCIÓN:</div>
            <input class="campo" id="f${i}" value="${d.funcion}">
        </div>
    `;
});

/* ------------------------------
   FLECHAS
------------------------------ */
function cambiar(i,dir){
    let input = document.getElementById("va"+i);
    let val = parseFloat(input.value);
    val += dir * 0.01;
    if(val < 0) val = 0;
    input.value = val.toFixed(2);
}

/* ------------------------------
   SUBIR A LA API (PHP)
------------------------------ */
async function subirAPI(){

    let apiData = {};

    datos.forEach(d => {
        apiData[d.rasgo.toLowerCase()] = {
            significado: d.significado,
            variable: d.variable,
            rango: d.rango,
            valor: d.valor,
            funcion: d.funcion
        };
    });

    // Ruta correcta (misma carpeta)
    await fetch("guardar.php", {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify(apiData)
    });
}

/* ------------------------------
   GUARDAR TODO + API
------------------------------ */
async function guardar(){
    datos.forEach((d,i)=>{
        d.significado = document.getElementById("s"+i).value;
        d.variable    = document.getElementById("v"+i).value;
        d.rango       = document.getElementById("r"+i).value;
        d.valor       = parseFloat(document.getElementById("va"+i).value);
        d.funcion     = document.getElementById("f"+i).value;
    });

    // Guardar local
    localStorage.setItem("diccionarioAnimalista", JSON.stringify(datos));

    // Guardar API (si existe)
    try{
        await subirAPI();
        alert("Cambios guardados y API actualizada ✔");
    }catch(e){
        alert("Cambios guardados (API aún no conectada) ✔");
    }
}

</script>

</body>
</html>




